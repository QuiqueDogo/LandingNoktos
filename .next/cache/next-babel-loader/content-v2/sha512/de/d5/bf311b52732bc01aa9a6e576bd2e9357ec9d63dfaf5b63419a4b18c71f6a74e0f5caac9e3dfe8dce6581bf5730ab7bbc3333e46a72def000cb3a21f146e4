{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Quique/Desktop/LandingCustomers/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Quique/Desktop/LandingCustomers/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Content from \"./Content\";\nimport { getUserWallet } from \"services/usersService\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setUserWallet } from \"redux/actions/userAction\";\nimport { useEffect, useCallback, memo, useState } from \"react\";\n\nvar HeaderLogin = function HeaderLogin() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      canBuyTokens = _useState[0],\n      setCanBuyTokens = _useState[1];\n\n  var _useSelector = useSelector(function (_ref) {\n    var company = _ref.company;\n    return company;\n  }),\n      company = _useSelector.company;\n\n  var userState = useSelector(function (_ref2) {\n    var user = _ref2.user;\n    return user;\n  });\n  var user = userState.user,\n      rol = userState.rol,\n      userWallet = userState.userWallet,\n      reloadUserWallet = userState.reloadUserWallet;\n  var getWallet = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var companyId, _yield$getUserWallet, data, saldoMembresia, saldo_token, saldo_noches_gratis, wallet;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            companyId = company === null || company === void 0 ? void 0 : company.id;\n            _context.next = 4;\n            return getUserWallet(companyId);\n\n          case 4:\n            _yield$getUserWallet = _context.sent;\n            data = _yield$getUserWallet.data;\n            saldoMembresia = data.saldoMembresia;\n            saldo_token = saldoMembresia.saldo_token, saldo_noches_gratis = saldoMembresia.saldo_noches_gratis;\n            wallet = {\n              noktos: saldo_token,\n              centauros: saldo_noches_gratis\n            };\n            dispatch(setUserWallet(wallet));\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 12]]);\n  })), [company, reloadUserWallet]);\n  var checkPermits = useCallback(function () {\n    var _rol$modulos;\n\n    var moduleShoppings = rol === null || rol === void 0 ? void 0 : (_rol$modulos = rol.modulos) === null || _rol$modulos === void 0 ? void 0 : _rol$modulos.filter(function (_ref4) {\n      var id = _ref4.id;\n      return id === 7;\n    });\n    if (!moduleShoppings) setCanBuyTokens(false);else {\n      if (!moduleShoppings.length) setCanBuyTokens(false);else {\n        var sectionBuyNoktos = moduleShoppings[0].secciones.filter(function (_ref5) {\n          var id = _ref5.id;\n          return id === 30;\n        });\n        if (!sectionBuyNoktos.length) setCanBuyTokens(false);else {\n          var buyAction = sectionBuyNoktos[0].acciones.filter(function (_ref6) {\n            var id = _ref6.id;\n            return id === 32;\n          });\n          if (buyAction.length > 0) setCanBuyTokens(true);\n        }\n      }\n    }\n  }, [rol]);\n  useEffect(function () {\n    checkPermits();\n  }, [checkPermits]);\n  useEffect(function () {\n    getWallet();\n  }, [getWallet]);\n  return /*#__PURE__*/_jsx(Content, {\n    user: user,\n    wallet: userWallet,\n    canBuyTokens: canBuyTokens\n  });\n};\n\nexport default /*#__PURE__*/memo(HeaderLogin);","map":null,"metadata":{},"sourceType":"module"}