{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from \"next/router\";\nimport LandingPageLayout from \"../components/layouts/LandingPageLayout/LandingPageLayout\";\nimport React, { useEffect } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport useBasicForm from \"../customHooks/useBasicForm\";\nimport validate from \"../utils/validations/LandingRegister\";\nimport { hideLoader, showLoader } from \"../redux/actions/application\";\nimport axios from \"axios\";\nimport { apiRoutes } from \"../utils/apiRoutes\";\nimport Swal from \"sweetalert2\";\nimport { setBasicConfigurationRequest } from \"../utils/requests\";\nimport { connect } from \"react-redux\";\n\nconst UnaNocheGratis = ({\n  dispatch,\n  company\n}) => {\n  const router = useRouter();\n  const host = router.query.host;\n  let contactoId;\n  let companiaId;\n  const {\n    handleChange,\n    handleSubmit,\n    clearForm,\n    resetIsSubmiting,\n    values,\n    errors,\n    setValue\n  } = useBasicForm(sendBasicRegister, validate);\n  useEffect(() => {\n    setValue(\"id_catalogo_suscripcion\", 0);\n    setValue(\"id_catalogo_membresia\", 0);\n    setValue(\"rfc\", \"0\");\n    sendFirstLead();\n  }, []);\n\n  function sendBasicRegister() {\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.baseCompany}/${apiRoutes.basicRegisterWithEmail}`, values, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n      console.log(response);\n\n      if (response.status === 200) {\n        if (response.data.contacto.hasOwnProperty(\"compania_id\") === true && response.data.contacto.compania_id !== null) {\n          resetIsSubmiting();\n          Swal.fire({\n            text: \"Ya existe una cuenta con este correo, intenta iniciar sesión o recupera la contraseña de la cuenta.\",\n            icon: \"warning\",\n            confirmButtonText: \"Ok\"\n          });\n        } else {\n          sendComplementaryRegister(response.data.contacto.id);\n        }\n      } else {\n        resetIsSubmiting();\n        Swal.fire({\n          title: \"Error\",\n          text: \"No se pudo realizar el registro\",\n          icon: \"error\",\n          confirmButtonText: \"Ok\"\n        });\n      }\n    }).catch(error => {\n      resetIsSubmiting();\n      dispatch(hideLoader());\n      Swal.fire({\n        title: \"Error\",\n        text: \"No se pudo realizar el registro\",\n        icon: \"error\",\n        confirmButtonText: \"Ok\"\n      });\n    });\n  }\n\n  function sendComplementaryRegister(idContacto) {\n    values.contacto_id = idContacto;\n    values.catalogo_suscripcion_id = 0;\n    values.catalogo_membresia_id = 0;\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.baseCompany}/${apiRoutes.contact}`, values, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n\n      if (response.status === 200) {\n        clearForm();\n        sendLead(response.data.user_id);\n        separatePromo(response.data.compania_id);\n        contactoId = response.data.contacto_id;\n        companiaId = response.data.compania_id;\n      } else {\n        resetIsSubmiting();\n        Swal.fire({\n          title: \"Error\",\n          text: \"No se pudo realizar el registro\",\n          icon: \"error\",\n          confirmButtonText: \"Ok\"\n        });\n      }\n    }).catch(error => {\n      dispatch(hideLoader());\n      resetIsSubmiting();\n      Swal.fire({\n        title: \"Error\",\n        text: \"No se pudo realizar el registro\",\n        icon: \"error\",\n        confirmButtonText: \"Ok\"\n      });\n    });\n  }\n\n  function sendLead(contactoId) {\n    let dataRequest = {\n      host_id: host,\n      campania_id: 1,\n      canal_id: 1,\n      user_id: contactoId\n    };\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.lead}`, dataRequest, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n    }).catch(error => {\n      dispatch(hideLoader());\n    });\n  }\n\n  function separatePromo(companiaId) {\n    let dataRequest = {\n      promocode: \"1CENTAURO\",\n      compania_id: companiaId,\n      catalogo_suscripcion_id: 0,\n      catalogo_membresia_id: 0\n    };\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.basePromo}${apiRoutes.apart}`, dataRequest, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n\n      if (response.status === 201) {\n        applyPromo(response.data.promocion_apartada.id);\n      }\n    }).catch(error => {\n      dispatch(hideLoader());\n    });\n  }\n\n  function applyPromo(promoId) {\n    let dataRequest = {\n      promocion_aplicada_id: promoId,\n      card_id: 0\n    };\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.basePromo}${apiRoutes.apply}`, dataRequest, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n\n      if (response.status === 201) {\n        router.push({\n          pathname: \"/schedule\",\n          query: {\n            contacto_id: contactoId,\n            compania_id: companiaId,\n            moduleFrom: 1\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch(hideLoader());\n    });\n  }\n\n  function sendFirstLead() {\n    let dataRequest = {\n      host_id: host,\n      campania_id: 1,\n      canal_id: 1\n    };\n    dispatch(showLoader());\n    axios.post(`${apiRoutes.baseUrl}${apiRoutes.lead}`, dataRequest, setBasicConfigurationRequest()).then(response => {\n      dispatch(hideLoader());\n\n      if (response.status === 200) {}\n    }).catch(error => {\n      dispatch(hideLoader());\n    });\n  }\n\n  return /*#__PURE__*/_jsx(LandingPageLayout, {\n    title: \"NOKTOS | Noches Gratis de Hospedaje\",\n    url: \"https://www.noktos.com/unanochegratis\",\n    keywords: \"\",\n    description: \"\",\n    children: /*#__PURE__*/_jsx(\"main\", {\n      className: \"una-noche-gratis__main_container\",\n      children: /*#__PURE__*/_jsxs(Container, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"una-noche-gratis__container_logo\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"/img/noktos_logo.svg\",\n            alt: \"\"\n          })\n        }), /*#__PURE__*/_jsxs(\"section\", {\n          className: \"una-noche-gratis__section_form\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"una-noche-gratis__container_form_title\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"fas fa-chevron-right\"\n            }), \" \", /*#__PURE__*/_jsx(\"h2\", {\n              children: \"REG\\xCDSTRATE HOY\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"una-noche-gratis__container_form_subtitle\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              children: \"\\xA1Y OBT\\xC9N EL MISMO PRECIO EN TODOS TUS VIAJES!\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"una-noche-gratis__container_form\",\n            children: /*#__PURE__*/_jsxs(\"form\", {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-md-6\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"completebasicregister__input_container\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      className: \"completebasicregister__label_input\",\n                      htmlFor: \"txt-name\",\n                      children: \"Nombre\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"input-group\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsx(\"span\", {\n                          className: \"input-group-text blue_addon\",\n                          id: \"txt-name\",\n                          children: /*#__PURE__*/_jsx(\"i\", {\n                            className: \"fas fa-user\"\n                          })\n                        })\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"text\",\n                        className: `form-control rounded_input ${errors.name && \"is-invalid-input\"}`,\n                        placeholder: \"Nombre\",\n                        \"aria-label\": \"Email\",\n                        \"aria-describedby\": \"txt-nombre-addon\",\n                        id: \"txt-nombre\",\n                        name: \"name\",\n                        onChange: handleChange,\n                        value: values.name || \"\"\n                      })]\n                    }), errors.name && /*#__PURE__*/_jsx(\"p\", {\n                      className: \"error-text\",\n                      children: errors.name\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-md-6\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"completebasicregister__input_container\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      className: \"completebasicregister__label_input\",\n                      htmlFor: \"txt-appaterno\",\n                      children: \"Apellido paterno\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"input-group\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsx(\"span\", {\n                          className: \"input-group-text blue_addon\",\n                          id: \"txt-appaterno-addon\",\n                          children: /*#__PURE__*/_jsx(\"i\", {\n                            className: \"fas fa-user\"\n                          })\n                        })\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"text\",\n                        className: `form-control rounded_input ${errors.apellido_paterno && \"is-invalid-input\"}`,\n                        placeholder: \"Apellido paterno\",\n                        \"aria-label\": \"Email\",\n                        \"aria-describedby\": \"txt-appaterno-addon\",\n                        id: \"txt-appaterno\",\n                        name: \"apellido_paterno\",\n                        onChange: handleChange,\n                        value: values.apellido_paterno || \"\"\n                      })]\n                    }), errors.apellido_paterno && /*#__PURE__*/_jsx(\"p\", {\n                      className: \"error-text\",\n                      children: errors.apellido_paterno\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-md-6\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"completebasicregister__input_container\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      className: \"completebasicregister__label_input\",\n                      htmlFor: \"txt-telefono\",\n                      children: \"Correo electr\\xF3nico\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"input-group\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsx(\"span\", {\n                          className: \"input-group-text blue_addon\",\n                          id: \"txt-email-addon\",\n                          children: \"@\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"email\",\n                        className: `form-control rounded_input ${errors.correo && \"is-invalid-input\"}`,\n                        placeholder: \"Correo electr\\xF3nico\",\n                        \"aria-label\": \"Email\",\n                        \"aria-describedby\": \"txt-email-addon\",\n                        id: \"txt-email\",\n                        name: \"correo\",\n                        onChange: handleChange,\n                        value: values.correo || \"\"\n                      })]\n                    }), errors.correo && /*#__PURE__*/_jsx(\"p\", {\n                      className: \"error-text\",\n                      children: errors.correo\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-md-6\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"completebasicregister__input_container\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      className: \"completebasicregister__label_input\",\n                      htmlFor: \"txt-telefono\",\n                      children: \"N\\xFAmero telef\\xF3nico\"\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"input-group\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsx(\"span\", {\n                          className: \"input-group-text blue_addon\",\n                          id: \"txt-telefono-addon\",\n                          children: /*#__PURE__*/_jsx(\"i\", {\n                            className: \"fas fa-phone-alt\"\n                          })\n                        })\n                      }), /*#__PURE__*/_jsx(\"input\", {\n                        type: \"tel\",\n                        className: `form-control rounded_input ${errors.telefono && \"is-invalid-input\"}`,\n                        placeholder: \"Telefono\",\n                        \"aria-label\": \"Email\",\n                        \"aria-describedby\": \"txt-telefono-addon\",\n                        id: \"txt-telefono\",\n                        name: \"telefono\",\n                        onChange: handleChange,\n                        value: values.telefono || \"\"\n                      })]\n                    }), errors.telefono && /*#__PURE__*/_jsx(\"p\", {\n                      className: \"error-text\",\n                      children: errors.telefono\n                    })]\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"basicregister__button_container\",\n                children: /*#__PURE__*/_jsxs(\"button\", {\n                  className: \"btn btn-primary basicregister__button_continue btn-block\",\n                  children: [\"ENV\\xCDAR REGISTRO\", \" \", /*#__PURE__*/_jsx(\"i\", {\n                    className: \"fas fa-chevron-right\"\n                  })]\n                })\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"una-noche-gratis__container_title\",\n          children: /*#__PURE__*/_jsxs(\"h1\", {\n            children: [\"CONOCE M\\xC1S SOBRE \", /*#__PURE__*/_jsx(\"span\", {\n              children: \"NOKTOS\"\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"una-noche-gratis__container_row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"una-noche-gratis__container_column_form\",\n            children: /*#__PURE__*/_jsxs(\"section\", {\n              className: \"una-noche-gratis__section_benefits\",\n              children: [/*#__PURE__*/_jsx(\"h2\", {\n                className: \"una-noche-gratis__section_benefits_title\",\n                children: \"AL PAGAR CON NOKTOS PUEDES:\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"una-noche-gratis__container_benefits\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"una-noche-gratis__benefits\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"una-noche-gratis__benefits_number\",\n                    children: \"1\"\n                  }), \" \", /*#__PURE__*/_jsxs(\"p\", {\n                    class: \"una-noche-gratis__benefits_text\",\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: \"CONGELAR\"\n                    }), \" LAS TARIFAS DE TUS VIAJES TODO EL A\\xD1O\"]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"una-noche-gratis__benefits\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"una-noche-gratis__benefits_number\",\n                    children: \"2\"\n                  }), \" \", /*#__PURE__*/_jsxs(\"p\", {\n                    class: \"una-noche-gratis__benefits_text\",\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: \"CONTROLAR\"\n                    }), \" CADA ASPECTO DE TU VIAJE EN UNA SOLA PLATAFORMA\"]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"una-noche-gratis__benefits\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"una-noche-gratis__benefits_number\",\n                    children: \"3\"\n                  }), \" \", /*#__PURE__*/_jsxs(\"p\", {\n                    class: \"una-noche-gratis__benefits_text\",\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: \"DEDUCIR Y FACTURAR\"\n                    }), \" LOS GASTOS DE TUS VIAJES\"]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"una-noche-gratis__benefits\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"una-noche-gratis__benefits_number\",\n                    children: \"4\"\n                  }), \" \", /*#__PURE__*/_jsxs(\"p\", {\n                    class: \"una-noche-gratis__benefits_text\",\n                    children: [/*#__PURE__*/_jsx(\"span\", {\n                      children: \"PERSONALIZAR\"\n                    }), \" TU MEMBRES\\xCDA A LAS NECESIDADES DE TU EMPRESA\"]\n                  })]\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"una-noche-gratis__container_column_video\",\n            children: /*#__PURE__*/_jsx(\"figure\", {\n              children: /*#__PURE__*/_jsx(\"video\", {\n                src: \"/videos/landing_video.mp4\",\n                autoPlay: true,\n                controls: true,\n                muted: true\n              })\n            })\n          })]\n        })]\n      })\n    })\n  });\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nexport default connect(mapStateToProps)(UnaNocheGratis);","map":null,"metadata":{},"sourceType":"module"}